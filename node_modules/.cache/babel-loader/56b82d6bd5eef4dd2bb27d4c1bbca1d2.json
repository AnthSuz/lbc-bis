{"ast":null,"code":"import _slicedToArray from \"/Users/anthonysuzanne/LeReacteur/React/09/lbc-bis/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/anthonysuzanne/LeReacteur/React/09/lbc-bis/src/components/Offers.js\";\nimport React, { useState, useEffect } from \"react\";\nimport Null from \"../images/img-null.png\";\nimport { Link } from \"react-router-dom\";\nimport Wen from \"../svg/Wen\";\nimport LeftPage from \"../svg/LeftPage\";\nimport LeftPageBlue from \"../svg/LeftPageBlue\";\nimport RightPageBlue from \"../svg/RightPageBlue\";\nimport RightPage from \"../svg/RightPage\";\nimport axios from \"axios\";\n\nconst Offers = () => {\n  //   const date = format(new Date(props.date), \"MM/dd/yyyy Ã  mm:ss\");\n  const _useState = useState(true),\n        _useState2 = _slicedToArray(_useState, 2),\n        isLoading = _useState2[0],\n        setIsLoading = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        card = _useState4[0],\n        setCard = _useState4[1];\n\n  const _useState5 = useState(0),\n        _useState6 = _slicedToArray(_useState5, 2),\n        page = _useState6[0],\n        setPage = _useState6[1];\n\n  const _useState7 = useState(),\n        _useState8 = _slicedToArray(_useState7, 2),\n        count = _useState8[0],\n        setCount = _useState8[1];\n\n  const _useState9 = useState(\"\"),\n        _useState10 = _slicedToArray(_useState9, 2),\n        title = _useState10[0],\n        setTitle = _useState10[1];\n\n  const _useState11 = useState(\"\"),\n        _useState12 = _slicedToArray(_useState11, 2),\n        priceMin = _useState12[0],\n        setPriceMin = _useState12[1];\n\n  const _useState13 = useState(\"\"),\n        _useState14 = _slicedToArray(_useState13, 2),\n        priceMax = _useState14[0],\n        setPriceMax = _useState14[1];\n\n  const _useState15 = useState(),\n        _useState16 = _slicedToArray(_useState15, 2),\n        sort = _useState16[0],\n        setSort = _useState16[1];\n\n  const limit = 5;\n  const tab = [];\n  const sortTab = [\"\", \"price-desc\", \"price-asc\", \"date-desc\", \"date-asc\"];\n  const sortTabModified = [];\n\n  for (let i = 0; i < sortTab.length; i++) {\n    sortTabModified.push(React.createElement(\"option\", {\n      value: sortTab[i],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 31\n      },\n      __self: this\n    }, sortTab[i]));\n  }\n\n  let url = \"https://leboncoin-api.herokuapp.com/api/offer/with-count?skip=\" + page + \"&limit=\" + limit;\n\n  if (title !== \"\") {\n    url = url + \"&title=\" + title;\n  }\n\n  if (priceMin > 0) {\n    url = url + \"&priceMin=\" + priceMin;\n  }\n\n  if (priceMax > 0) {\n    url = url + \"&priceMax=\" + priceMax;\n  }\n\n  if (sort) {\n    url = url + \"&sort=\" + sort;\n  }\n\n  const fetchData = async () => {\n    try {\n      const response = await axios.get(url);\n      setIsLoading(false);\n      setCard(response.data.offers);\n      setCount(response.data.count);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  for (let i = 0; i < count / limit; i++) {\n    tab.push(i + 1);\n  }\n\n  useEffect(() => {\n    fetchData();\n  }, [page]);\n  return React.createElement(\"section\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container pv-50\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"search--box br-5 box-shadow\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: event => {\n      event.preventDefault();\n      fetchData();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"search\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(Wen, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    type: \"text\",\n    value: title,\n    placeholder: \"Que recherchez-vous ?\",\n    onChange: event => {\n      setTitle(event.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  })), React.createElement(\"input\", {\n    className: \"search--box--input--price\",\n    type: \"number\",\n    value: priceMin,\n    placeholder: \"Prix Min.\",\n    onChange: event => {\n      setPriceMin(event.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    className: \"search--box--input--price\",\n    type: \"number\",\n    value: priceMax,\n    placeholder: \"Prix Max.\",\n    onChange: event => {\n      setPriceMax(event.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }), React.createElement(\"select\", {\n    className: \"search--box--input--sort\",\n    value: sort,\n    onChange: event => {\n      setSort(event.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, sortTabModified), React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Rechercher\",\n    className: \"search--button--blue\",\n    onClick: () => {\n      fetchData();\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  })))), isLoading === true ? React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, \"Chargement en cours ...\") : React.createElement(\"div\", {\n    className: \"container offers\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138\n    },\n    __self: this\n  }, card.map((annonce, index) => {\n    return React.createElement(Link, {\n      to: \"/offer/\" + annonce._id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"article\", {\n      className: \"box-shadow overflow-hidden br-5 mb-20\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"bg-silver d-flex\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, annonce.pictures[0] !== undefined ? React.createElement(\"img\", {\n      src: annonce.pictures[0],\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }) : React.createElement(\"img\", {\n      src: Null,\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147\n      },\n      __self: this\n    })), React.createElement(\"ul\", {\n      className: \"white offers--description p-15 offers--inside--description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"top--description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"offers--title\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, annonce.title), React.createElement(\"li\", {\n      className: \"offers--price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, annonce.price, \" \\u20AC\")), React.createElement(\"div\", {\n      className: \"bottom--description\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"offers--date\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, annonce.created)))));\n  }), React.createElement(\"div\", {\n    className: \"offers--array--pages\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }, page === 0 ? React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }, page === 0 ? React.createElement(LeftPage, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }) : React.createElement(LeftPageBlue, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  })) : React.createElement(\"span\", {\n    onClick: () => {\n      setPage(page - limit);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169\n    },\n    __self: this\n  }, page === 0 ? React.createElement(LeftPage, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }) : React.createElement(LeftPageBlue, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  })), tab.map((array, index) => {\n    return React.createElement(React.Fragment, null, page === array * limit - limit ? React.createElement(\"p\", {\n      className: \"selected--page br-5\",\n      onClick: () => {\n        setPage(array * limit - limit);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, array) : React.createElement(\"p\", {\n      onClick: () => {\n        setPage(array * limit - limit);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, array));\n  }), page === (tab.length - 1) * limit ? React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204\n    },\n    __self: this\n  }, page === (tab.length - 1) * limit ? React.createElement(RightPage, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206\n    },\n    __self: this\n  }) : React.createElement(RightPageBlue, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208\n    },\n    __self: this\n  })) : React.createElement(\"span\", {\n    onClick: () => {\n      setPage(page + limit);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212\n    },\n    __self: this\n  }, page === (tab.length - 1) * limit ? React.createElement(RightPage, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218\n    },\n    __self: this\n  }) : React.createElement(RightPageBlue, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220\n    },\n    __self: this\n  })))));\n};\n\nexport default Offers;","map":{"version":3,"sources":["/Users/anthonysuzanne/LeReacteur/React/09/lbc-bis/src/components/Offers.js"],"names":["React","useState","useEffect","Null","Link","Wen","LeftPage","LeftPageBlue","RightPageBlue","RightPage","axios","Offers","isLoading","setIsLoading","card","setCard","page","setPage","count","setCount","title","setTitle","priceMin","setPriceMin","priceMax","setPriceMax","sort","setSort","limit","tab","sortTab","sortTabModified","i","length","push","url","fetchData","response","get","data","offers","error","console","log","event","preventDefault","target","value","map","annonce","index","_id","pictures","undefined","price","created","array"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\n\nimport Null from \"../images/img-null.png\";\nimport { Link } from \"react-router-dom\";\nimport Wen from \"../svg/Wen\";\n\nimport LeftPage from \"../svg/LeftPage\";\nimport LeftPageBlue from \"../svg/LeftPageBlue\";\n\nimport RightPageBlue from \"../svg/RightPageBlue\";\nimport RightPage from \"../svg/RightPage\";\n\nimport axios from \"axios\";\n\nconst Offers = () => {\n  //   const date = format(new Date(props.date), \"MM/dd/yyyy Ã  mm:ss\");\n  const [isLoading, setIsLoading] = useState(true);\n  const [card, setCard] = useState([]);\n  const [page, setPage] = useState(0);\n  const [count, setCount] = useState();\n  const [title, setTitle] = useState(\"\");\n  const [priceMin, setPriceMin] = useState(\"\");\n  const [priceMax, setPriceMax] = useState(\"\");\n  const [sort, setSort] = useState();\n  const limit = 5;\n  const tab = [];\n\n  const sortTab = [\"\", \"price-desc\", \"price-asc\", \"date-desc\", \"date-asc\"];\n  const sortTabModified = [];\n  for (let i = 0; i < sortTab.length; i++) {\n    sortTabModified.push(<option value={sortTab[i]}>{sortTab[i]}</option>);\n  }\n\n  let url =\n    \"https://leboncoin-api.herokuapp.com/api/offer/with-count?skip=\" +\n    page +\n    \"&limit=\" +\n    limit;\n\n  if (title !== \"\") {\n    url = url + \"&title=\" + title;\n  }\n  if (priceMin > 0) {\n    url = url + \"&priceMin=\" + priceMin;\n  }\n  if (priceMax > 0) {\n    url = url + \"&priceMax=\" + priceMax;\n  }\n  if (sort) {\n    url = url + \"&sort=\" + sort;\n  }\n  const fetchData = async () => {\n    try {\n      const response = await axios.get(url);\n      setIsLoading(false);\n      setCard(response.data.offers);\n      setCount(response.data.count);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  for (let i = 0; i < count / limit; i++) {\n    tab.push(i + 1);\n  }\n  useEffect(() => {\n    fetchData();\n  }, [page]);\n\n  return (\n    <section>\n      <div className=\"container pv-50\">\n        <div className=\"search--box br-5 box-shadow\">\n          <form\n            onSubmit={event => {\n              event.preventDefault();\n              fetchData();\n            }}\n          >\n            <div className=\"search\">\n              <Wen />\n\n              <input\n                type=\"text\"\n                value={title}\n                placeholder=\"Que recherchez-vous ?\"\n                onChange={event => {\n                  setTitle(event.target.value);\n                }}\n              />\n            </div>\n            <input\n              className=\"search--box--input--price\"\n              type=\"number\"\n              value={priceMin}\n              placeholder=\"Prix Min.\"\n              onChange={event => {\n                setPriceMin(event.target.value);\n              }}\n            />\n            <input\n              className=\"search--box--input--price\"\n              type=\"number\"\n              value={priceMax}\n              placeholder=\"Prix Max.\"\n              onChange={event => {\n                setPriceMax(event.target.value);\n              }}\n            />\n\n            <select\n              className=\"search--box--input--sort\"\n              value={sort}\n              onChange={event => {\n                setSort(event.target.value);\n              }}\n            >\n              {sortTabModified}\n            </select>\n\n            <input\n              type=\"submit\"\n              value=\"Rechercher\"\n              className=\"search--button--blue\"\n              onClick={() => {\n                fetchData();\n              }}\n            />\n            <br />\n          </form>\n        </div>\n      </div>\n\n      {/* OFFERS */}\n      {isLoading === true ? (\n        <p>Chargement en cours ...</p>\n      ) : (\n        <div className=\"container offers\">\n          {card.map((annonce, index) => {\n            return (\n              <Link to={\"/offer/\" + annonce._id}>\n                <article className=\"box-shadow overflow-hidden br-5 mb-20\">\n                  <div className=\"bg-silver d-flex\">\n                    {annonce.pictures[0] !== undefined ? (\n                      <img src={annonce.pictures[0]} alt=\"\" />\n                    ) : (\n                      <img src={Null} alt=\"\" />\n                    )}\n                  </div>\n\n                  <ul className=\"white offers--description p-15 offers--inside--description\">\n                    <div className=\"top--description\">\n                      <li className=\"offers--title\">{annonce.title}</li>\n                      <li className=\"offers--price\">{annonce.price} â¬</li>\n                    </div>\n\n                    <div className=\"bottom--description\">\n                      <li className=\"offers--date\">{annonce.created}</li>\n                    </div>\n                  </ul>\n                </article>\n              </Link>\n            );\n          })}\n          <div className=\"offers--array--pages\">\n            {page === 0 ? (\n              <span>{page === 0 ? <LeftPage /> : <LeftPageBlue />}</span>\n            ) : (\n              <span\n                onClick={() => {\n                  setPage(page - limit);\n                }}\n              >\n                {page === 0 ? <LeftPage /> : <LeftPageBlue />}\n              </span>\n            )}\n\n            {tab.map((array, index) => {\n              return (\n                <>\n                  {page === array * limit - limit ? (\n                    <p\n                      className=\"selected--page br-5\"\n                      onClick={() => {\n                        setPage(array * limit - limit);\n                      }}\n                    >\n                      {array}\n                    </p>\n                  ) : (\n                    <p\n                      onClick={() => {\n                        setPage(array * limit - limit);\n                      }}\n                    >\n                      {array}\n                    </p>\n                  )}\n                </>\n              );\n            })}\n\n            {page === (tab.length - 1) * limit ? (\n              <span>\n                {page === (tab.length - 1) * limit ? (\n                  <RightPage />\n                ) : (\n                  <RightPageBlue />\n                )}\n              </span>\n            ) : (\n              <span\n                onClick={() => {\n                  setPage(page + limit);\n                }}\n              >\n                {page === (tab.length - 1) * limit ? (\n                  <RightPage />\n                ) : (\n                  <RightPageBlue />\n                )}\n              </span>\n            )}\n          </div>\n        </div>\n      )}\n    </section>\n  );\n};\nexport default Offers;\n"]},"metadata":{},"sourceType":"module"}