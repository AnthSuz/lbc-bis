{"ast":null,"code":"import _slicedToArray from \"/Users/anthonysuzanne/LeReacteur/React/09/lbc-bis/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/anthonysuzanne/LeReacteur/React/09/lbc-bis/src/components/SignUp.js\";\nimport React, { useState } from \"react\";\nimport Watch from \"../svg/Watch\";\nimport Cloche from \"../svg/Cloche\";\nimport Eye from \"../svg/Eye\";\nimport axios from \"axios\";\nimport Cookie from \"js-cookie\";\nimport { useHistory } from \"react-router-dom\";\n\nconst SignUp = () => {\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        pseudo = _useState2[0],\n        setPseudo = _useState2[1];\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        mail = _useState4[0],\n        setMail = _useState4[1];\n\n  const _useState5 = useState(\"\"),\n        _useState6 = _slicedToArray(_useState5, 2),\n        password = _useState6[0],\n        setPassword = _useState6[1];\n\n  const _useState7 = useState(\"\"),\n        _useState8 = _slicedToArray(_useState7, 2),\n        confirmPassword = _useState8[0],\n        setConfirmPassword = _useState8[1];\n\n  const _useState9 = useState({\n    status: false,\n    message: \"\"\n  }),\n        _useState10 = _slicedToArray(_useState9, 2),\n        signUpError = _useState10[0],\n        setSignUpError = _useState10[1];\n\n  let history = useHistory();\n\n  const fetchSignUp = async () => {\n    event.preventDefault();\n\n    try {\n      const response = await axios.post(\"https://leboncoin-api.herokuapp.com/api/user/sign_up\", {\n        email: mail,\n        password: password,\n        username: pseudo\n      });\n\n      if (response.data.token) {\n        // 1. sauvegarder le token dans les cookies\n        Cookie.set(\"token\", response.data.token); // 2. redirige vers la page offers\n\n        history.push(\"/\"); // 3. Mettre à jour l'état user\n\n        props.setUser(response.data); // console.log(response.data.status);\n      } else {\n        alert(\"mot de passe/email faux\");\n        console.log(\"faux\");\n      }\n\n      console.log(response.data);\n      console.log(\"password ===>\", password);\n    } catch (err) {\n      console.log(err.message);\n      console.log(\"maison\");\n    }\n  };\n\n  return React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"inside--signup box-shadow\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"left--signup \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, \"Pour cr\\xE9er un compte ?\"), React.createElement(\"div\", {\n    className: \"watch\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"logo--inside\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(Watch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"txt--inside\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"mini-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, \"Gagnez du temps\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, \"Publiez vos annonces rapidement, avec vos informations pr\\xE9-remplies chaque fois que vous souhaitez d\\xE9poser une nouvelle annonce.\"))), React.createElement(\"div\", {\n    className: \"watch\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"logo--inside\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(Cloche, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"txt--inside\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"mini-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, \"Soyez les premiers inform\\xE9s\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, \"Cr\\xE9ez des alertes Immo ou Emploi et ne manquez jamais l\\u2019annonce qui vous int\\xE9resse.\"))), React.createElement(\"div\", {\n    className: \"watch\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"logo--inside\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, React.createElement(Eye, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"txt--inside\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    className: \"mini-title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"Visibilit\\xE9\"), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"Suivez les statistiques de vos annonces (nombre de fois o\\xF9 votre annonce a \\xE9t\\xE9 vue, nombre de contacts re\\xE7us).\")))), React.createElement(\"div\", {\n    className: \"right--signup \",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101\n    },\n    __self: this\n  }, React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, \"Cr\\xE9ez un compte\"), React.createElement(\"form\", {\n    onSubmit: event => {\n      if (password !== confirmPassword) {\n        setSignUpError({\n          status: true,\n          message: \"Mot de passe non identique\"\n        });\n      } else if (password.length < 6) {\n        setSignUpError({\n          status: true,\n          message: \"Mot de passe minimum 6 caractères\"\n        }); // console.log(signUpError);\n      } else if (pseudo.length === 0) {\n        setSignUpError({\n          status: true,\n          message: \"Renseignez un pseudo\"\n        });\n      } else if (mail.length === 0) {\n        setSignUpError({\n          status: true,\n          message: \"Renseignez un email\"\n        });\n      } else {\n        fetchSignUp();\n        setSignUpError({\n          status: false,\n          message: \"\"\n        });\n      }\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"pseudo-email\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, \"Pseudo *\"), React.createElement(\"input\", {\n    type: \"text\",\n    onChange: event => {\n      setPseudo(event.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137\n    },\n    __self: this\n  }), React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143\n    },\n    __self: this\n  }, \"Adresse email *\"), React.createElement(\"input\", {\n    type: \"text\",\n    onChange: event => {\n      setMail(event.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"mdp\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154\n    },\n    __self: this\n  }, \"Mot de passe *\"), React.createElement(\"input\", {\n    type: \"text\",\n    onChange: event => {\n      setPassword(event.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162\n    },\n    __self: this\n  }, React.createElement(\"p\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163\n    },\n    __self: this\n  }, \"Confirmer le mot de passe*\"), React.createElement(\"input\", {\n    type: \"text\",\n    onChange: event => {\n      setConfirmPassword(event.target.value);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }))), React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"checkbox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"checkbox\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177\n    },\n    __self: this\n  }, \"\\xAB J\\u2019accepte les Conditions G\\xE9n\\xE9rales de Vente et \\u2028les Conditions G\\xE9n\\xE9rales d\\u2019Utilisation \\xBB\"), signUpError.status === true ? React.createElement(\"p\", {\n    className: \"error-log\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183\n    },\n    __self: this\n  }, signUpError.message) : null), React.createElement(\"div\", {\n    className: \"button-created\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"submit\",\n    value: \"Cr\\xE9er mon Compte Personnel\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188\n    },\n    __self: this\n  }))))));\n};\n\nexport default SignUp;","map":{"version":3,"sources":["/Users/anthonysuzanne/LeReacteur/React/09/lbc-bis/src/components/SignUp.js"],"names":["React","useState","Watch","Cloche","Eye","axios","Cookie","useHistory","SignUp","pseudo","setPseudo","mail","setMail","password","setPassword","confirmPassword","setConfirmPassword","status","message","signUpError","setSignUpError","history","fetchSignUp","event","preventDefault","response","post","email","username","data","token","set","push","props","setUser","alert","console","log","err","length","target","value"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\nimport Watch from \"../svg/Watch\";\nimport Cloche from \"../svg/Cloche\";\nimport Eye from \"../svg/Eye\";\nimport axios from \"axios\";\nimport Cookie from \"js-cookie\";\nimport { useHistory } from \"react-router-dom\";\n\nconst SignUp = () => {\n  const [pseudo, setPseudo] = useState(\"\");\n  const [mail, setMail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [confirmPassword, setConfirmPassword] = useState(\"\");\n  const [signUpError, setSignUpError] = useState({\n    status: false,\n    message: \"\"\n  });\n\n  let history = useHistory();\n\n  const fetchSignUp = async () => {\n    event.preventDefault();\n    try {\n      const response = await axios.post(\n        \"https://leboncoin-api.herokuapp.com/api/user/sign_up\",\n        {\n          email: mail,\n          password: password,\n          username: pseudo\n        }\n      );\n      if (response.data.token) {\n        // 1. sauvegarder le token dans les cookies\n        Cookie.set(\"token\", response.data.token);\n\n        // 2. redirige vers la page offers\n        history.push(\"/\");\n\n        // 3. Mettre à jour l'état user\n        props.setUser(response.data);\n        // console.log(response.data.status);\n      } else {\n        alert(\"mot de passe/email faux\");\n        console.log(\"faux\");\n      }\n      console.log(response.data);\n      console.log(\"password ===>\", password);\n    } catch (err) {\n      console.log(err.message);\n      console.log(\"maison\");\n    }\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"inside--signup box-shadow\">\n        <div className=\"left--signup \">\n          <h2>Pour créer un compte ?</h2>\n          <div className=\"watch\">\n            <div className=\"logo--inside\">\n              <Watch />\n            </div>\n            <div className=\"txt--inside\">\n              <p className=\"mini-title\">Gagnez du temps</p>\n              <p>\n                Publiez vos annonces rapidement, avec vos informations\n                pré-remplies chaque fois que vous souhaitez déposer une nouvelle\n                annonce.\n              </p>\n            </div>\n          </div>\n\n          <div className=\"watch\">\n            <div className=\"logo--inside\">\n              <Cloche />\n            </div>\n            <div className=\"txt--inside\">\n              <p className=\"mini-title\">Soyez les premiers informés</p>\n              <p>\n                Créez des alertes Immo ou Emploi et ne manquez jamais l’annonce\n                qui vous intéresse.\n              </p>\n            </div>\n          </div>\n\n          <div className=\"watch\">\n            <div className=\"logo--inside\">\n              <Eye />\n            </div>\n            <div className=\"txt--inside\">\n              <p className=\"mini-title\">Visibilité</p>\n              <p>\n                Suivez les statistiques de vos annonces (nombre de fois où votre\n                annonce a été vue, nombre de contacts reçus).\n              </p>\n            </div>\n          </div>\n        </div>\n\n        {/* SEPARATEUR */}\n        <div className=\"right--signup \">\n          <h2>Créez un compte</h2>\n          <form\n            onSubmit={event => {\n              if (password !== confirmPassword) {\n                setSignUpError({\n                  status: true,\n                  message: \"Mot de passe non identique\"\n                });\n              } else if (password.length < 6) {\n                setSignUpError({\n                  status: true,\n                  message: \"Mot de passe minimum 6 caractères\"\n                });\n                // console.log(signUpError);\n              } else if (pseudo.length === 0) {\n                setSignUpError({\n                  status: true,\n                  message: \"Renseignez un pseudo\"\n                });\n              } else if (mail.length === 0) {\n                setSignUpError({\n                  status: true,\n                  message: \"Renseignez un email\"\n                });\n              } else {\n                fetchSignUp();\n                setSignUpError({\n                  status: false,\n                  message: \"\"\n                });\n              }\n            }}\n          >\n            <div className=\"pseudo-email\">\n              <p>Pseudo *</p>\n              <input\n                type=\"text\"\n                onChange={event => {\n                  setPseudo(event.target.value);\n                }}\n              />\n              <p>Adresse email *</p>\n              <input\n                type=\"text\"\n                onChange={event => {\n                  setMail(event.target.value);\n                }}\n              />\n            </div>\n\n            <div className=\"mdp\">\n              <div>\n                <p>Mot de passe *</p>\n                <input\n                  type=\"text\"\n                  onChange={event => {\n                    setPassword(event.target.value);\n                  }}\n                />\n              </div>\n              <div>\n                <p>Confirmer le mot de passe*</p>\n                <input\n                  type=\"text\"\n                  onChange={event => {\n                    setConfirmPassword(event.target.value);\n                  }}\n                />\n              </div>\n            </div>\n\n            <br />\n            <div className=\"checkbox\">\n              <input type=\"checkbox\" />\n\n              <span>\n                « J’accepte les Conditions Générales de Vente et  les Conditions\n                Générales d’Utilisation »\n              </span>\n              {signUpError.status === true ? (\n                <p className=\"error-log\">{signUpError.message}</p>\n              ) : null}\n            </div>\n            {/* {signUpError.message} */}\n            <div className=\"button-created\">\n              <input type=\"submit\" value=\"Créer mon Compte Personnel\" />\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\nexport default SignUp;\n"]},"metadata":{},"sourceType":"module"}